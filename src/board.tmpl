{namespace lweb.view}

{template user-view-brief}
	  <span class="userinfo">
	       {$nick}
	  </span>
{/template}

{template moderatorial-action-view}
	  <a href="{$route}">{$caption}</a>
{/template}

{template message-subtree-view}
	  {for $i in range($level)}
	       &nbsp
	  {/for}
	  <span class="folded">
	  	  {call user-view-brief data="$author" /}:
		  <span class="header">
		  {if $moderatorial}
		      {call moderatorial-action-view data="$moderatorial" /}
		  {/if}
		  {if $current == $id}
		      {$header}
		  {else}
		      <a href={$url}>{$header}</a>
		  {/if}
	      	  </span>
	  </span>
	  <div class="children">
          {foreach $child in $children}
	  	   {call message-subtree-view data="$child"}
		   	 {param level: $level + 1 /}
			 {param current: $current /}
		   {/call}
	  {/foreach}
	  </div>
{/template}

{template message-tree-view}
	  {call message-subtree-view data="all"}
	  	{param level: 0 /}
	  {/call}	  
{/template}

{template message-view}
	  <div class="menu">
	       <a href={$login}>Login</a>
	  </div>
	  <div class="head">
	       {call user-view-brief data="$author" /}:
	  	<span class="header">
		      {$header}
	        </span>
	  </div>
	  <div class="text">
	       {$text}
	  </div>
	  <br />
	  {call message-tree-view data="$thread"}
	  	{param current: $id /}
	  {/call}
	  <form method="post">
	  	<span class="user">
		   {call user-view-brief data="$user" /}:
		</span><input type="text" name="header" /> 
		<textarea rows="12" name="text" style="width: 100%"></textarea>
		<input type="submit" name="send" value="Send" />
	  </form>
{/template}

{template message-list}
	  <div class="menu">
	       <a href={$login}>Login</a>
	  </div>
	  {foreach $msg in $messages}
	  	   {call message-tree-view data="$msg" /} <br />
	  {/foreach}	  
{/template}

{template message-post}
	  BAD MESSAGE: {$error}<br />
	  <a href={$return}>Click here to return.</a>
{/template}

{template access-denied}
	  <div>Access to the function you requested is denied.</div>
	  {if $reason}
	      <div>{$reason}</div>
	  {/if}
{/template}

{template login-form}
	  <form method="post">
	  	<input type="text" name="uid" />
		<input type="submit" name="login" value="Войти" />
	  </form>
{/template}

{template login-as-uid}
	  1
{/template}
